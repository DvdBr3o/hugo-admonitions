{{/* layouts/_default/_markup/render-blockquote-alert.html */}}
{{- if not ($.Page.Scratch.Get "notice-style-loaded-flag") -}}
    {{ $notice := resources.Get "css/notice.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $notice.RelPermalink }}" integrity="{{ $notice.Data.Integrity }}">
    {{- $.Page.Scratch.Set "notice-style-loaded-flag" true -}}
{{- end -}}

{{ $type := "" }}
{{ $title := "" }}
{{ $content := "" }}

{{/* Check if this is an alert blockquote */}}
{{ if eq .Type "alert" }}
    {{ $type = .AlertType }}
    {{ $title = .AlertTitle }}
    {{ $content = .Text }}
{{ end }}

{{/* Fallback to note if type is not supported */}}
{{ if not (templates.Exists (printf "partials/icons/%s.svg" $type)) }}
    {{ $type = "note" }}
{{ end }}

{{ if $type }}
<div class="notice {{ $type }}">
    <div class="notice-header">
        {{ partial (printf "icons/%s.svg" $type) . }}
        {{ with $title }}
            {{ . }}
        {{ else }}
            {{/* Check if translation exists */}}
            {{ if T $type | eq $type }}
                {{/* If no translation found, capitalize the type */}}
                {{ title $type }}
            {{ else }}
                {{ T $type }}
            {{ end }}
        {{ end }}
    </div>
    {{ if ne $content "<p>" }}
        <div class="notice-content">
            {{ $content }}
        </div>
    {{ end }}
</div>
{{ else }}
<blockquote>
    {{ .Text }}
</blockquote>
{{ end }}